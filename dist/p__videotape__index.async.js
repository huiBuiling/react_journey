(self.webpackChunk=self.webpackChunk||[]).push([[178],{52084:function(e,r,t){"use strict";t.r(r);var _=t(12444),s=t.n(_),o=t(72004),n=t.n(o),a=t(25098),b=t.n(a),E=t(31996),h=t.n(E),c=t(26037),i=t.n(c),j=t(9783),l=t.n(j),v=t(67294),f=t(85893),x=function(O){h()(y,O);var m=i()(y);function y(p){var u;return s()(this,y),u=m.call(this,p),l()(b()(u),"renderUrl",function(d){var P="video/webm",M=new Blob([d],{type:P}),R=URL.createObjectURL(M);u.setState({chunkURL:R}),setTimeout(function(){console.log(u.state.chunkURL),u.refs.newvideo.play()},5e3)}),u.state={recorder:null,stream:null,chunk:null,chunkURL:null},u.recorder=null,u}return n()(y,[{key:"init",value:function(){var u=this;navigator.mediaDevices.getUserMedia({audio:!0,video:{width:900,height:460}}).then(function(d){u.recorder=new MediaRecorder(d),u.setState({stream:d})},function(d){console.log("\u51FA\u9519\uFF0C\u8BF7\u786E\u4FDD\u5DF2\u5141\u8BB8\u6D4F\u89C8\u5668\u83B7\u53D6\u97F3\u89C6\u9891\u6743\u9650"),console.log("error",d)})}},{key:"bindEvents",value:function(){var u=this;this.recorder.ondataavailable=function(d){console.log("e",d),u.setState({chunk:d.data}),u.renderUrl(d.data)},this.recorder.onstop=function(){console.log("this.state.chunk",u.state.chunk)}}},{key:"clickStart",value:function(){this.onPreview(),this.onStart(),this.bindEvents()}},{key:"onPreview",value:function(){this.refs.video.srcObject=this.state.stream,this.refs.video.muted=!0,this.refs.video.play()}},{key:"onStart",value:function(){this.recorder.start()}},{key:"clickEnd",value:function(){this.recorder.stop(),this.refs.video.pause()}},{key:"componentDidMount",value:function(){this.init()}},{key:"render",value:function(){return(0,f.jsxs)("div",{children:[(0,f.jsx)("video",{src:"",ref:"video",style:{width:"100vw",height:"50vh"}}),(0,f.jsx)("button",{onClick:this.clickStart.bind(this),children:"\u5F00\u59CB"}),(0,f.jsx)("button",{onClick:this.clickEnd.bind(this),children:"\u505C\u6B62"}),this.state.chunkURL?(0,f.jsx)("a",{href:this.state.chunkURL,download:"test.webm",children:"\u70B9\u51FB\u4E0B\u8F7D"}):"",(0,f.jsx)("video",{controls:!0,src:this.state.chunkURL,style:{width:"100vw",height:"50vh"},ref:"newvideo"})]})}}]),y}(v.Component);r.default=x},75251:function(e,r,t){"use strict";var _;var s=t(67294),o=Symbol.for("react.element"),n=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,b=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,E={key:!0,ref:!0,__self:!0,__source:!0};function h(c,i,j){var l,v={},f=null,x=null;j!==void 0&&(f=""+j),i.key!==void 0&&(f=""+i.key),i.ref!==void 0&&(x=i.ref);for(l in i)a.call(i,l)&&!E.hasOwnProperty(l)&&(v[l]=i[l]);if(c&&c.defaultProps)for(l in i=c.defaultProps,i)v[l]===void 0&&(v[l]=i[l]);return{$$typeof:o,type:c,key:f,ref:x,props:v,_owner:b.current}}_=n,r.jsx=h,r.jsxs=h},85893:function(e,r,t){"use strict";e.exports=t(75251)},25098:function(e){function r(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports},12444:function(e){function r(t,_){if(!(t instanceof _))throw new TypeError("Cannot call a class as a function")}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports},72004:function(e){function r(_,s){for(var o=0;o<s.length;o++){var n=s[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(_,n.key,n)}}function t(_,s,o){return s&&r(_.prototype,s),o&&r(_,o),Object.defineProperty(_,"prototype",{writable:!1}),_}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},26037:function(e,r,t){var _=t(48374),s=t(21771),o=t(73408);function n(a){var b=s();return function(){var h=_(a),c;if(b){var i=_(this).constructor;c=Reflect.construct(h,arguments,i)}else c=h.apply(this,arguments);return o(this,c)}}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},48374:function(e){function r(t){return e.exports=r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},e.exports.__esModule=!0,e.exports.default=e.exports,r(t)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports},31996:function(e,r,t){var _=t(21314);function s(o,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(n&&n.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),n&&_(o,n)}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports},21771:function(e){function r(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports},73408:function(e,r,t){var _=t(52677).default,s=t(25098);function o(n,a){if(a&&(_(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return s(n)}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},21314:function(e){function r(t,_){return e.exports=r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,n){return o.__proto__=n,o},e.exports.__esModule=!0,e.exports.default=e.exports,r(t,_)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}}]);
